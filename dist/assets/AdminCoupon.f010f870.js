import{a as b,b as v}from"./pencil.d1805650.js";import{_ as D}from"./trash.b1add08b.js";import{_ as w}from"./document-text.96657561.js";import{a as d}from"./index.03bb1a20.js";import{o as c,e as a,f as t,t as n,F as p,i as u,c as M,k as j,h as C,j as _,g as h}from"./vendor.51a50092.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./x.cd8c69b2.js";const $={components:{Modal:b},name:"dashboard-product",data(){return{url:"https://vue3-course-api.hexschool.io/v2",path:"dobe",openModal:!1,tableSubject:["\u5206\u985E","\u7522\u54C1\u540D\u7A31","\u539F\u50F9","\u552E\u50F9","\u555F\u7528","\u7DE8\u8F2F","\u7D30\u7BC0","\u522A\u9664"],productsData:[],productDetail:[]}},mounted(){const l=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");console.log("token====>",l),d.defaults.headers.common.Authorization=l,d.get(`${this.url}/api/${this.path}/admin/products`).then(s=>{console.log("read res.data.products====>",s.data.products),this.productsData=s.data.products,this.productDetail=s.data.products[0],console.log("read res.data.products[0]====>",s.data.products[0]),console.log("read this.productDetail====>",this.productDetail),console.log("read this.productDetail.category====>",this.productDetail.category)})},watch:{},methods:{controlModal(){this.openModal=!0},readPD(l){console.log("read id====>",l);const s=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");d.defaults.headers.common.Authorization=s,d.get(`${this.url}/api/${this.path}/admin/products`).then(r=>{console.log("read res.data====>",r.data),this.productDetail=r.data.products.filter(m=>m.id==l)})},removePD(l){const s=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");d.defaults.headers.common.Authorization=s,d.delete(`${this.url}/api/${this.path}/admin/product/${l}`).then(r=>{console.log("res.data====>",r.data),window.location.href="/#/dashboard"})}}},A={class:"max-w-2xl mx-auto lg:max-w-7xl px-4"},B={class:"flex justify-between py-4 mb-8"},N=t("h2",{class:"flex font-black text-2xl tracking-wide"},[t("span",null,"\u512A\u60E0\u5238\u7BA1\u7406")],-1),T=["openModal"],V={class:"flex flex-row"},z={class:"basis-1/4"},S={class:"bg-slate-200 drop-shadow-2xl rounded p-4"},F=t("h2",{class:"font-bold text-xl mb-4"},"\u7522\u54C1\u7D30\u7BC0",-1),I={class:"flex justify-center"},U=["src"],E={class:"text-left"},L={class:"font-bold text-l"},q={class:"inline-block text-xs bg-slate-700 text-white py-1 px-4"},G={class:"my-2"},H={class:"my-2"},J={class:"my-2"},K={class:"font-bold mr-2"},O={class:"line-through mr-2"},Q=C("\u500B/\u5143 "),R={class:"flex flex-wrap"},W=["src"],X={class:"basis-3/4 pl-4"},Y={class:"w-full"},Z={class:"border-b-2"},tt={class:"py-4 px-6"},ot=["onClick"],et=["onClick"],st=["onClick"],nt={class:"py-4"};function lt(l,s,r,m,e,i){const f=v,g=w,y=D,k=b;return c(),a(p,null,[t("div",A,[t("div",B,[N,t("button",{class:"bg-cyan-900 text-cyan-200 rounded py-2 px-4 hover:bg-cyan-700",type:"submit",onClick:s[0]||(s[0]=(...o)=>i.controlModal&&i.controlModal(...o)),openModal:e.openModal}," \u5EFA\u7ACB\u65B0\u7522\u54C1 ",8,T)]),t("div",V,[t("div",z,[t("div",S,[F,t("div",null,[t("div",I,[t("img",{src:e.productDetail.imageUrl,class:"h-40 w-auto"},null,8,U)]),t("div",E,[t("h3",L,n(e.productDetail.title),1),t("span",q,n(e.productDetail.category),1),t("p",G,n(e.productDetail.description),1),t("p",H,n(e.productDetail.content),1),t("p",J,[t("span",K,n(e.productDetail.price),1),t("span",O,n(e.productDetail.origin_price),1),Q])]),t("div",R,[(c(!0),a(p,null,u(e.productDetail.imagesUrl,o=>(c(),a("img",{src:o,class:"h-9 border border-slate-50",key:o},null,8,W))),128))])])])]),t("div",X,[t("table",Y,[t("thead",null,[t("tr",Z,[(c(!0),a(p,null,u(e.tableSubject,o=>(c(),a("td",{class:"font-bold py-2 px-4",key:o+1},n(o),1))),128))])]),t("tbody",null,[(c(!0),a(p,null,u(e.productsData,o=>(c(),a("tr",{class:"border-b",key:o.id},[t("td",tt,n(o.category),1),t("td",null,n(o.title),1),t("td",null,n(o.origin_price),1),t("td",null,n(o.price),1),t("td",null,n(o.is_enabled),1),t("td",null,[t("button",{onClick:_(x=>l.editPD(this.removeID=o.id),["prevent"])},[h(f,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,ot)]),t("td",null,[t("button",{onClick:_(x=>i.readPD(o.id),["prevent"])},[h(g,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,et)]),t("td",null,[t("button",{onClick:_(x=>i.removePD(this.removeID=o.id),["prevent"])},[h(y,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,st)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",nt,"\u76EE\u524D\u6709 "+n(e.productsData.length)+" \u9805\u7522\u54C1",1)])])])])])]),e.openModal?(c(),M(k,{key:0,onClose:s[1]||(s[1]=o=>e.openModal=!1),openModal:e.openModal},null,8,["openModal"])):j("",!0)],64)}var _t=P($,[["render",lt]]);export{_t as default};
